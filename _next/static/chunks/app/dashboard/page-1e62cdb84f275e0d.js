(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{5258:(e,r,s)=>{Promise.resolve().then(s.bind(s,9491))},6547:(e,r,s)=>{"use strict";s.d(r,{H:()=>l});var t=s(5155),a=s(5239),i=s(2115);function l(e){let{src:r,alt:s,fill:l,width:n,height:o,className:c="",sizes:d,unoptimized:u=!0,priority:m=!1}=e,[p,h]=(0,i.useState)(!0),[g,x]=(0,i.useState)(!1),j=!r||g;return(0,t.jsxs)(t.Fragment,{children:[p&&!j&&(0,t.jsx)("div",{className:"image-loading-overlay",style:{position:"absolute",inset:0,background:"var(--control-background, #1e293b)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2,borderRadius:"inherit"},children:(0,t.jsx)("div",{className:"loading-spinner"})}),(0,t.jsx)(a.default,{src:j?"/placeholder.svg":r,alt:s,fill:l,width:l?void 0:n,height:l?void 0:o,className:c,sizes:d,unoptimized:u,priority:m,onLoad:()=>{h(!1)},onError:()=>{h(!1),x(!0)},style:{opacity:p&&!j?0:1,transition:"opacity 0.2s ease-in-out"}})]})}},9491:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>g});var t=s(5155),a=s(63);function i(e){let{onClick:r}=e,s=(0,a.useRouter)();return(0,t.jsx)("button",{type:"button",onClick:()=>{null==r||r(),s.push("/create")},className:"floating-add-button","aria-label":"Add report",children:"+"})}var l=s(2115),n=s(9715),o=s(6191),c=s(2619),d=s.n(c),u=s(6547);function m(e){let{report:r}=e,{title:s,date:a,reference:i}=r,l=i.url&&"string"==typeof i.url?i.url:i.image&&"string"==typeof i.image?i.image:Array.isArray(i.images)&&i.images.length>0?i.images[0].url:void 0,n=new Date(a),o=n.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return(0,t.jsx)(d(),{href:"/fetch?report=".concat(r.id),className:"report-card-link",children:(0,t.jsxs)("article",{className:"report-card","aria-label":s,children:[(0,t.jsx)("time",{className:"report-card__date",dateTime:n.toISOString(),children:o}),(0,t.jsx)("figure",{className:"report-card__media",children:l?(0,t.jsx)(u.H,{src:l,alt:s,fill:!0,unoptimized:!0,className:"report-card__image",sizes:"200px"}):(0,t.jsx)("span",{className:"report-card__placeholder","aria-hidden":!0})}),(0,t.jsx)("h3",{className:"report-card__title",children:s})]})})}var p=s(7382);function h(){let[e,r]=(0,l.useState)([]),[s,i]=(0,l.useState)(!0),[c,d]=(0,l.useState)(null),[u,h]=(0,l.useState)(void 0),[g,x]=(0,l.useState)(!1),[j,f]=(0,l.useState)(!1),y=(0,l.useRef)(!1),N=(0,a.useRouter)();(0,l.useEffect)(()=>{(async()=>{if(!y.current)try{y.current=!0,i(!0);let e=await (0,p.y_)(20);r(e.reports),h(e.nextCursor||void 0),x(e.hasMore)}catch(e){y.current=!1,d(e instanceof Error?e.message:"Failed to load reports")}finally{i(!1)}})()},[]);let _=async()=>{if(g&&!j)try{f(!0);let e=await (0,p.y_)(20,u);r(r=>[...r,...e.reports]),h(e.nextCursor||void 0),x(e.hasMore)}catch(e){d(e instanceof Error?e.message:"Failed to load more reports")}finally{f(!1)}},b=e.map(e=>{let r=e.reference,s={id:r.id,url:r.image};return{...e,reference:s}});return s?(0,t.jsx)("section",{className:"reports-grid",children:(0,t.jsxs)("div",{className:"report-page__loading",children:[(0,t.jsx)("div",{className:"loading-spinner"}),(0,t.jsx)("p",{children:"Loading reports..."})]})}):c?(0,t.jsx)("section",{className:"reports-grid",children:(0,t.jsxs)("div",{className:"reports-grid__error",children:[(0,t.jsxs)("p",{children:["Error: ",c]}),(0,t.jsx)("button",{onClick:()=>window.location.reload(),children:"Retry"})]})}):0===e.length?(0,t.jsx)("section",{className:"reports-grid",children:(0,t.jsxs)("div",{className:"reports-grid__empty",children:[(0,t.jsx)(n.A,{className:"w-12 h-12 text-gray-400 mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No reports yet"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6 text-center max-w-md",children:"Get started by creating your first report. Upload an image and we'll help you find similar products."}),(0,t.jsxs)("button",{onClick:()=>{N.push("/create")},className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,t.jsx)(o.A,{className:"w-4 h-4"}),"Create Report"]})]})}):(0,t.jsxs)("section",{className:"reports-grid",children:[(0,t.jsx)("div",{className:"reports-grid__list",children:b.map(e=>(0,t.jsx)(m,{report:e},e.id))}),g&&(0,t.jsx)("div",{className:"reports-grid__load-more",children:(0,t.jsx)("button",{onClick:_,disabled:j,className:"load-more-button",children:j?"Loading...":"Load More Reports"})})]})}function g(){return(0,t.jsxs)("div",{className:"dashboard",children:[(0,t.jsx)("main",{className:"dashboard__main",children:(0,t.jsx)(h,{})}),(0,t.jsx)(i,{})]})}}},e=>{e.O(0,[780,155,382,441,255,358],()=>e(e.s=5258)),_N_E=e.O()}]);