"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[382],{87:(t,e,r)=>{r.d(e,{iD:()=>i,Ow:()=>c,ns:()=>l});var o=r(3280),a=function(t){return t.SUCCESS="SUCCESS",t.RESET="RESET",t.DENIED="DENIED",t}({});let s="".concat("https://824xuvy567.execute-api.us-east-2.amazonaws.com/securek9","/auth");function n(t,e,r){return{status:t,body:e,error:r}}async function i(t,e){try{var r,i;let c=await fetch("".concat(s,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:e})}),l=null!=(r=await c.json())?r:{};if(200===c.status&&l.accessToken&&l.idToken){let e={idToken:l.idToken,accessToken:l.accessToken,refreshToken:l.refreshToken,username:t};return o.LP.set(e),n(200,a.SUCCESS)}if(202===c.status&&l.session&&l.username)return o.LP.setResetSession(l.username,l.session),n(202,a.RESET);return n(c.status,a.DENIED,null!=(i=null==l?void 0:l.message)?i:"")}catch(e){let t=e&&"object"==typeof e&&"message"in e&&"string"==typeof e.message?e.message:String(e);return n(500,a.DENIED,t)}}async function c(){let t=o.LP.refreshToken,e=o.LP.username;if(!t||!e)return n(401,!1,"Missing refresh token or username");try{var r;let a=await fetch("".concat(s,"/refresh"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:t,username:e})}),i=null!=(r=await a.json())?r:{};if(200===a.status&&i.accessToken&&i.idToken)return o.LP.set({idToken:i.idToken,accessToken:i.accessToken,refreshToken:t,username:e}),n(200,!0);return(401===a.status||403===a.status)&&o.LP.clear(),n(a.status,!1,(null==i?void 0:i.message)||"Token refresh failed")}catch(t){return n(500,!1,t&&"object"==typeof t&&"message"in t&&"string"==typeof t.message?t.message:String(t))}}async function l(t){let e=o.LP.idToken;if(e&&!o.LP.expired){let r=await t({Authorization:"Bearer ".concat(e)});if(401===r.status){if((await c()).body){let e=o.LP.idToken;if(e)return t({Authorization:"Bearer ".concat(e)})}o.LP.clear()}return r}let r=await c();if(!r.body)return o.LP.clear(),{status:r.status,body:null,error:r.error||"Authentication failed"};let a=o.LP.idToken;return t(a?{Authorization:"Bearer ".concat(a)}:{})}},3280:(t,e,r)=>{r.d(e,{LP:()=>i,xI:()=>s});let o="k9:auth:tokens",a="k9:auth:reset";function s(t){try{let e=t.split(".");if(e.length<2)return null;let r=e[1],o=atob(r.replace(/-/g,"+").replace(/_/g,"/"));return JSON.parse(decodeURIComponent(escape(o)))}catch(t){return null}}class n{set(t){this.isClient&&(localStorage.setItem(o,JSON.stringify(t)),localStorage.removeItem(a))}setResetSession(t,e){this.isClient&&(localStorage.setItem(a,JSON.stringify({username:t,session:e})),localStorage.removeItem(o))}clear(){this.isClient&&(localStorage.removeItem(o),localStorage.removeItem(a))}clearResetSession(){this.isClient&&localStorage.removeItem(a)}get all(){if(!this.isClient)return null;let t=localStorage.getItem(o);return t?JSON.parse(t):null}get accessToken(){var t,e;return null!=(e=null==(t=this.all)?void 0:t.accessToken)?e:null}get idToken(){var t,e;return null!=(e=null==(t=this.all)?void 0:t.idToken)?e:null}get refreshToken(){var t,e;return null!=(e=null==(t=this.all)?void 0:t.refreshToken)?e:null}get username(){var t,e;return null!=(e=null==(t=this.all)?void 0:t.username)?e:null}get resetSession(){if(!this.isClient)return null;let t=localStorage.getItem(a);if(!t)return null;try{return JSON.parse(t).session}catch(t){return null}}get resetUsername(){if(!this.isClient)return null;let t=localStorage.getItem(a);if(!t)return null;try{return JSON.parse(t).username}catch(t){return null}}get expired(){let t=this.accessToken;if(!t)return!0;let e=s(t);if(!e||!e.exp)return!0;let r=Math.floor(Date.now()/1e3);return e.exp<=r}get invalid(){return!this.idToken||!this.accessToken||!!this.expired&&!this.refreshToken}constructor(){this.isClient=!0}}let i=new n},4609:(t,e,r)=>{r.d(e,{ReportsApiService:()=>h,reportsApiService:()=>y});var o=r(87);class a{async request(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,o.ns)(async r=>{try{let o,a="".concat(this.baseUrl).concat(t),s=await fetch(a,{...e,headers:{"Content-Type":"application/json",...r,...e.headers}});try{o=await s.json()}catch(t){o=null}if(!s.ok){let t=(null==o?void 0:o.message)||"HTTP ".concat(s.status,": ").concat(s.statusText);if(401===s.status)return{status:s.status,body:null,error:"Authentication required. Please log in again."};return{status:s.status,body:null,error:t}}return{status:s.status,body:o,error:void 0}}catch(t){return{status:500,body:null,error:t instanceof Error?t.message:"Network error"}}})}async get(t,e){let r=new URL("".concat(this.baseUrl).concat(t));return e&&Object.entries(e).forEach(t=>{let[e,o]=t;r.searchParams.append(e,o)}),this.request(t+(e?"?".concat(r.searchParams):""))}async post(t,e){return this.request(t,{method:"POST",body:e?JSON.stringify(e):void 0})}async put(t,e){return this.request(t,{method:"PUT",body:e?JSON.stringify(e):void 0})}async patch(t,e){return this.request(t,{method:"PATCH",body:e?JSON.stringify(e):void 0})}async delete(t){return this.request(t,{method:"DELETE"})}async upload(t,e){return(0,o.ns)(async r=>{try{let o,a="".concat(this.baseUrl).concat(t),s={};Object.entries(r).forEach(t=>{let[e,r]=t;r&&(s[e]=r)});let n=await fetch(a,{method:"POST",headers:s,body:e});try{o=await n.json()}catch(t){o=null}if(!n.ok)return{status:n.status,body:null,error:(null==o?void 0:o.message)||"HTTP ".concat(n.status,": ").concat(n.statusText)};return{status:n.status,body:o,error:void 0}}catch(t){return{status:500,body:null,error:t instanceof Error?t.message:"Network error"}}})}async download(t){return(0,o.ns)(async e=>{try{let r="".concat(this.baseUrl).concat(t),o={};Object.entries(e).forEach(t=>{let[e,r]=t;r&&(o[e]=r)});let a=await fetch(r,{method:"GET",headers:o});if(!a.ok){let t;try{t=await a.json()}catch(e){t=null}return{status:a.status,body:null,error:(null==t?void 0:t.message)||"HTTP ".concat(a.status,": ").concat(a.statusText)}}let s=await a.blob();return{status:a.status,body:s,error:void 0}}catch(t){return{status:500,body:null,error:t instanceof Error?t.message:"Network error"}}})}constructor(t="https://824xuvy567.execute-api.us-east-2.amazonaws.com/securek9"){this.baseUrl=t}}let s=new a;function n(t){let e=t.match(/^.*?__title__(.+)$/);return e?decodeURIComponent(e[1]).replace(/-/g," ").replace(/\b\w/g,t=>t.toUpperCase()):decodeURIComponent(t).replace(/-/g," ").replace(/\b\w/g,t=>t.toUpperCase())}function i(t){return t.replace(/[^\w\-_.]/g,"").replace(/\.+/g,".").replace(/^\.|\.$/,"")}function c(t){return t?t.charAt(0).toUpperCase()+t.slice(1).toLowerCase():t}function l(t){return Math.round(t/2.54*10)/10}function d(t){return{length:t.length?{val:l(t.length),unit:"in"}:void 0,width:t.width?{val:l(t.width),unit:"in"}:void 0,thickness:t.thickness?{val:t.thickness,unit:"mm"}:void 0}}function u(t){var e,r,o,a,s,n,i,l,u;let p=t.images.map((e,r)=>({id:"".concat(t.id,"_img").concat(r+1),url:e})),m=d({length:null==(e=t.description)?void 0:e.length,width:null==(r=t.description)?void 0:r.width,thickness:null==(o=t.description)?void 0:o.thickness});return{id:t.id,brand:(null==(a=t.description)?void 0:a.store)||"Unknown",model:(null==(s=t.description)?void 0:s.name)||"Material ".concat(t.id),images:p,category:{type:"Tile",material:c((null==(n=t.description)?void 0:n.material)||"ceramic")},formats:[{length:m.length,width:m.width,thickness:m.thickness,vendors:[{sku:"".concat(t.id,"-001"),store:(null==(i=t.description)?void 0:i.store)||"Unknown",name:(null==(l=t.description)?void 0:l.name)||"Material ".concat(t.id),url:(null==(u=t.description)?void 0:u.url)||"#",discontinued:!1}]}],analysis:{color:{primary:{vector:[t.scores.color.primary||0,t.scores.color.secondary||0],similarity:1-(t.scores.color.primary||0)},secondary:{vector:[t.scores.color.secondary||0,t.scores.color.tertiary||0],similarity:1-(t.scores.color.secondary||0)}},pattern:{primary:{vector:[t.scores.pattern.primary||0,t.scores.pattern.secondary||0],similarity:1-(t.scores.pattern.primary||0)},secondary:{vector:[t.scores.pattern.secondary||0,t.scores.pattern.tertiary||0],similarity:1-(t.scores.pattern.secondary||0)}},similarity:(()=>{let e=t.scores.color.primary||0,r=t.scores.color.secondary||0,o=t.scores.pattern.primary||0;return 1-(e+r+o+(t.scores.pattern.secondary||0))/4})()}}}function p(t){let e=t.images.map((e,r)=>({id:"".concat(t.id,"_img").concat(r+1),url:e})),r=d({length:t.description.length,width:t.description.width,thickness:t.description.thickness});return{id:t.id,brand:t.description.store||"Unknown",model:t.description.name||"Material ".concat(t.id),images:e,category:{type:"Tile",material:c(t.description.material)},formats:[{length:r.length,width:r.width,thickness:r.thickness,vendors:[{sku:"".concat(t.id,"-001"),store:t.description.store,name:t.description.name,url:t.description.url,discontinued:!1}]}],analysis:{color:{primary:{vector:[t.scores.color.primary||0,t.scores.color.secondary||0],similarity:1-(t.scores.color.primary||0)},secondary:{vector:[t.scores.color.secondary||0,t.scores.color.tertiary||0],similarity:1-(t.scores.color.secondary||0)}},pattern:{primary:{vector:[t.scores.pattern.primary||0,t.scores.pattern.secondary||0],similarity:1-(t.scores.pattern.primary||0)},secondary:{vector:[t.scores.pattern.secondary||0,t.scores.pattern.tertiary||0],similarity:1-(t.scores.pattern.secondary||0)}},similarity:1-t.match}}}class m{static async createReport(t,e){let r=function(t){if("string"!=typeof t)throw Error("Expected title to be a string, but received ".concat(typeof t));let e=Date.now().toString(36),r=Math.random().toString(36).substring(2,8),o="".concat(e).concat(r),a=encodeURIComponent(t.toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]/g,"").replace(/-+/g,"-").replace(/^-|-$/g,""));return"".concat(o,"__title__").concat(a)}(t);try{let t=[];for(let[o,a]of(console.log("[API] Creating job with ID: ".concat(r)),console.log("[API] Need to upload ".concat(e.images.length," images")),e.images.entries()))if(a.url.startsWith("data:")||a.url.startsWith("blob:"))try{console.log("[API] Processing image ".concat(o+1,"/").concat(e.images.length,": ").concat(a.id));let s=await fetch(a.url),n=await s.blob(),i="jpg";if(n.type){let t=n.type.toLowerCase();t.includes("png")?i="png":t.includes("jpeg")||t.includes("jpg")?i="jpg":t.includes("webp")?i="webp":t.includes("gif")&&(i="gif")}let c="img".concat(o,".").concat(i);console.log('[API] Generated filename: "'.concat(c,'" from index: ').concat(o,' and extension: "').concat(i,'"')),console.log("[API] Uploading image as: ".concat(c," (").concat(Math.round(n.size/1024),"KB)"));let l=await this.uploadImage(r,c,n);200===l.status?(t.push(c),console.log("[API] Successfully uploaded: ".concat(c))):(console.warn("[API] Failed to upload image ".concat(c,": ").concat(l.error)),console.warn("[API] Continuing without this image..."))}catch(t){console.warn("[API] Error processing image ".concat(o,": ").concat(t)),console.warn("[API] Continuing without this image...")}else console.log("[API] Using external URL for image ".concat(o,": ").concat(a.url)),t.push(a.url);console.log("[API] Successfully processed ".concat(t.length," images:"),t);let o=function(t){var e,r,o,a;let s=t.formats[0],n={length:(null==(r=(e={length:null==s?void 0:s.length,width:null==s?void 0:s.width,thickness:null==s?void 0:s.thickness}).length)?void 0:r.val)||void 0,width:(null==(o=e.width)?void 0:o.val)||void 0,thickness:(null==(a=e.thickness)?void 0:a.val)||void 0};return{type:(t.category.type||"tile").toLowerCase(),material:(t.category.material||"ceramic").toLowerCase(),length:n.length||12,width:n.width||6,thickness:n.thickness||null,images:t.images.map(t=>{if(t.url.startsWith("data:")||t.url.startsWith("blob:"))return i("".concat(t.id,".jpg"));try{let e=new URL(t.url).pathname.split("/").pop()||"".concat(t.id,".jpg");return i(e)}catch(e){return i("".concat(t.id,".jpg"))}})}}(e);o.images&&t.length>0?(o.images=t,console.log("[API] Updated material data with ".concat(t.length," image filenames"))):console.warn("[API] No images were successfully uploaded. Proceeding with original image URLs."),console.log("[API] Creating job with material data:",JSON.stringify(o,null,2));let a=await s.put("/fetch/".concat(r),o);if(200===a.status)return{status:201,body:{id:r,runId:a.body},error:void 0};return{status:a.status,body:{id:""},error:a.error||"Failed to create report"}}catch(t){return{status:500,body:{id:""},error:t instanceof Error?t.message:"Unknown error"}}}static async getReport(t){return s.get("/fetch/".concat(t))}static async searchSimilarMaterials(t,e){var r,o,a,n,i,c,l;let d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,u={type_:{type:.2,material:.2,missing:!0},shape:{missing:!0},color:{missing:!0},pattern:{missing:!0}};return((null==e||null==(r=e.shape)?void 0:r.length)&&(u.shape.length=e.shape.length),(null==e||null==(o=e.shape)?void 0:o.width)&&(u.shape.width=e.shape.width),(null==e||null==(a=e.shape)?void 0:a.thickness)&&(u.shape.thickness=e.shape.thickness),(null==e||null==(n=e.similarity)?void 0:n.threshold)!==void 0&&(u.color.primary=e.similarity.threshold),(null==e||null==(i=e.similarity)?void 0:i.colorSecondary)!==void 0&&(u.color.secondary=e.similarity.colorSecondary),(null==e||null==(c=e.similarity)?void 0:c.patternPrimary)!==void 0&&(u.pattern.primary=e.similarity.patternPrimary),(null==e||null==(l=e.similarity)?void 0:l.patternSecondary)!==void 0&&(u.pattern.secondary=e.similarity.patternSecondary),d>0)?s.post("/fetch/".concat(t,"?start=").concat(d),u):s.post("/fetch/".concat(t),u)}static async uploadImage(t,e,r){return(0,o.ns)(async o=>{try{let a="".concat("https://824xuvy567.execute-api.us-east-2.amazonaws.com/securek9","/fetch/").concat(t,"/album/").concat(e);console.log("[API] Uploading to: ".concat(a)),console.log("[API] Auth headers:",JSON.stringify(o,null,2)),console.log("[API] Content-Type: ".concat(r instanceof Blob?r.type:"application/octet-stream")),console.log("[API] Data size: ".concat(r instanceof Blob?r.size:r.byteLength," bytes")),console.log("[API] Filename: ".concat(e));let s={...o,"Content-Type":r instanceof Blob?r.type:"application/octet-stream"};console.log("[API] Final request headers:",JSON.stringify(s,null,2));let n=await fetch(a,{method:"PUT",body:r,headers:s});if(console.log("[API] Upload response status: ".concat(n.status," ").concat(n.statusText)),n.ok)return{status:200,body:void 0,error:void 0};let i="HTTP ".concat(n.status,": ").concat(n.statusText);try{let t=await n.text();t&&(i+=" - ".concat(t))}catch(t){}return console.error("[API] Upload failed: ".concat(i)),{status:n.status,body:void 0,error:i}}catch(e){let t=e instanceof Error?e.message:"Upload failed";return console.error("[API] Upload exception:",e),{status:500,body:void 0,error:t}}})}static async listAllReports(){return s.get("/report")}static transformJobListingToReport(t){let e={id:"".concat(t.job,"-reference"),brand:"Unknown",model:t.job,image:t.reference};return{id:t.job,title:n(t.job),author:"current-user",date:new Date(t.created).toISOString(),reference:e,favorites:[]}}static async getFavorites(t){return s.get("/report/".concat(t,"/favorites"))}static async getFavoritesAsProducts(t){let e=await this.getFavorites(t);return 200===e.status?{status:200,body:e.body.map(t=>p(t)),error:void 0}:{status:e.status,body:[],error:e.error}}static async updateFavorites(t,e){return s.put("/report/".concat(t,"/favorites"),{product_ids:e})}static async toggleFavorite(t,e){return s.post("/report/".concat(t,"/favorites"),{product_id:e})}static async getProductById(t,e){try{let r=await s.get("/fetch/".concat(t,"/product/").concat(e));if(200===r.status){let t=u(r.body);return{status:200,body:t,error:void 0}}return{status:r.status,body:null,error:r.error||"Product not found"}}catch(t){return{status:500,body:null,error:t instanceof Error?t.message:"Unknown error"}}}static async getProductFromSearch(t,e){try{let r=await s.post("/fetch/".concat(t),{type_:{type:.1,material:.1,missing:!0},shape:{length:.1,width:.1,thickness:.1,missing:!0},color:{primary:.1,secondary:.1,tertiary:.1,missing:!0},pattern:{primary:.1,secondary:.1,tertiary:.1,missing:!0}});if(200===r.status){let t=r.body.find(t=>t.id===e);if(!t)return{status:404,body:null,error:"Product not found in search results"};{let e=u(t);return{status:200,body:e,error:void 0}}}return{status:r.status,body:null,error:r.error||"Failed to search for product"}}catch(t){return{status:500,body:null,error:t instanceof Error?t.message:"Unknown error"}}}}class h{static async listReports(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;arguments.length>1&&arguments[1];let e=await m.listAllReports();if(200===e.status){let r=e.body.map(t=>m.transformJobListingToReport(t));return{status:200,body:{reports:r,total:r.length,limit:t,next_cursor:null,has_more:!1},error:void 0}}return{status:e.status,body:{reports:[],total:0,limit:t,next_cursor:null,has_more:!1},error:e.error}}static async createReport(t){let e=await m.createReport(t.title,t.reference);return 201===e.status?{status:201,body:{id:e.body.id,title:t.title,author:"current-user",date:new Date().toISOString()},error:void 0}:{status:e.status,body:{id:"",title:"",author:"",date:""},error:e.error}}static async getReport(t){console.log("[API] ReportsApiService.getReport called for reportId:",t);try{let e=await m.getReport(t);if(200!==e.status)return console.error("[API] Failed to fetch report:",t,e.error),{status:e.status,body:null,error:e.error||"Report not found"};let r=function(t,e,r){var o;let a=t.images.map((t,e)=>({id:"".concat(r,"_img").concat(e+1),url:t})),s={length:(o={length:t.length,width:t.width,thickness:t.thickness}).length?{val:o.length,unit:"in"}:void 0,width:o.width?{val:o.width,unit:"in"}:void 0,thickness:o.thickness?{val:o.thickness,unit:"mm"}:void 0};return{id:r,brand:"Unknown",model:"".concat(c(t.type)," ").concat(c(t.material)),images:a,category:{type:c(t.type),material:c(t.material)},formats:[{length:s.length,width:s.width,thickness:s.thickness,vendors:[{sku:"".concat(r,"-001"),store:"Material Database",name:"".concat(c(t.type)," ").concat(c(t.material)),url:"#",discontinued:!1}]}]}}(e.body,0,t),o=new Date().toISOString(),a={id:t,title:n(t),author:"current-user",date:o,reference:r,favorites:[]};return console.log("[API] Successfully retrieved report:",t),{status:200,body:a,error:void 0}}catch(t){return console.error("[API] Error fetching report data:",t),{status:500,body:null,error:t instanceof Error?t.message:"Failed to load report"}}}static async searchProducts(t,e){let r=((e.page||1)-1)*(e.limit||20),o=await m.searchSimilarMaterials(t,e.filters,r);if(200===o.status){let t=o.body.map(t=>{var e,r;return{id:t.id,brand:(null==(e=t.description)?void 0:e.store)||"Unknown",model:(null==(r=t.description)?void 0:r.name)||"Material ".concat(t.id),image:t.images[0]||"",analysis:{color:{primary:{vector:[t.scores.color.primary||0,t.scores.color.secondary||0],similarity:1-(t.scores.color.primary||0)},secondary:{vector:[t.scores.color.secondary||0,t.scores.color.tertiary||0],similarity:1-(t.scores.color.secondary||0)}},pattern:{primary:{vector:[t.scores.pattern.primary||0,t.scores.pattern.secondary||0],similarity:1-(t.scores.pattern.primary||0)},secondary:{vector:[t.scores.pattern.secondary||0,t.scores.pattern.tertiary||0],similarity:1-(t.scores.pattern.secondary||0)}},similarity:(()=>{let e=t.scores.color.primary||0,r=t.scores.color.secondary||0,o=t.scores.pattern.primary||0;return 1-(e+r+o+(t.scores.pattern.secondary||0))/4})()}}}),r=new Set,a=t.filter(t=>r.has(t.id)?(console.log("[API] Removing duplicate product ID: ".concat(t.id)),!1):(r.add(t.id),!0));return a.length!==t.length&&console.log("[API] Deduplication: ".concat(t.length," → ").concat(a.length," products (removed ").concat(t.length-a.length," duplicates)")),{status:200,body:{products:a,total:a.length,page:e.page||1,limit:e.limit||20},error:void 0}}return{status:o.status,body:{products:[],total:0,page:1,limit:20},error:o.error}}static async getProduct(t,e){console.log("[API] Getting product ".concat(e," from report ").concat(t));let r=await m.getProductById(t,e);if(200===r.status)return console.log("[API] Product ".concat(e," found via product endpoint")),r;if(404===r.status){console.log("[API] Product ".concat(e," not found via product endpoint, trying favorites..."));let r=await m.getFavorites(t);if(200===r.status){let t=r.body.find(t=>t.id===e);if(t)return console.log("[API] Product ".concat(e," found in favorites")),{status:200,body:p(t),error:void 0}}}return console.log("[API] Product ".concat(e," not found anywhere")),{status:404,body:null,error:"Product not found"}}static async updateFavoriteStatus(t,e,r){let o=await m.toggleFavorite(t,e);return 200===o.status?{status:200,body:{success:!0},error:void 0}:{status:o.status,body:{success:!1},error:o.error}}static async syncFavorites(t,e){let r=await m.updateFavorites(t,e);return 200===r.status?{status:200,body:{success:!0},error:void 0}:{status:r.status,body:{success:!1},error:r.error}}static async getFavorites(t){let e=await m.getFavoritesAsProducts(t);return 200===e.status?{status:200,body:e.body,error:void 0}:{status:e.status,body:[],error:e.error}}static async exportFavorites(t,e){try{let o=await this.getFavorites(t);if(200!==o.status)return{status:o.status,body:null,error:o.error||"Failed to fetch favorites"};let a=await this.getReport(t);if(200!==a.status)return{status:a.status,body:null,error:a.error||"Failed to fetch report"};let{exportFavoritesAsZip:s}=await Promise.all([r.e(496),r.e(748)]).then(r.bind(r,8748)),n=await s(o.body,a.body.reference,a.body.title,{onProgress:e});return{status:200,body:{blob:n,reportTitle:a.body.title},error:void 0}}catch(t){return console.error("[API] Export failed:",t),{status:500,body:null,error:t instanceof Error?t.message:"Export failed"}}}static async deleteReport(t){return console.warn("[API] deleteReport not implemented - need backend delete functionality"),{status:501,body:{success:!1},error:"Delete functionality not implemented"}}static async updateReport(t,e){return console.warn("[API] updateReport not implemented - need backend update functionality"),{status:501,body:null,error:"Update functionality not implemented"}}}let y=h},7382:(t,e,r)=>{r.d(e,{LU:()=>i,y_:()=>c,reportsApi:()=>l});var o=r(8198);let a=[{id:"1",title:"Office Building 2nd Floor",author:"dashboard.user",date:"2025-09-15",referenceProductId:"p1"},{id:"2",title:"Residential Layout Analysis",author:"dashboard.user",date:"2025-09-12",referenceProductId:"p2"},{id:"3",title:"Warehouse Floor Assessment",author:"dashboard.user",date:"2025-09-10",referenceProductId:"p7"},{id:"4",title:"Corporate Headquarters",author:"dashboard.user",date:"2025-09-08",referenceProductId:"p5"},{id:"5",title:"Retail Space Configuration",author:"dashboard.user",date:"2025-09-05",referenceProductId:"p3"},{id:"6",title:"Educational Facility Review",author:"dashboard.user",date:"2025-09-03",referenceProductId:"p6"},{id:"7",title:"Artisan Showroom Display",author:"dashboard.user",date:"2025-09-01",referenceProductId:"p8"},{id:"8",title:"Heritage Home Restoration",author:"dashboard.user",date:"2025-08-28",referenceProductId:"p4"}].map(t=>{let e=(0,o.qQ)(t.referenceProductId,t.id);if(!e)throw Error("Could not find product ".concat(t.referenceProductId," for report ").concat(t.id));let r=[];return"1"===t.id?r=["p2","p5"]:"3"===t.id&&(r=["p1"]),{id:t.id,title:t.title,author:t.author,date:t.date,reference:e,favorites:r}});var s=r(4609);async function n(t,e){console.log("[API] getFullReport called by: ".concat(e||"unknown"," for id: ").concat(t));try{let e=await s.ReportsApiService.getReport(t);if(200===e.status)return e.body;if(404===e.status)return;throw Error(e.error||"Failed to get report")}catch(t){console.error("[API] Error getting full report:",t),console.log("[API] Falling back to mock implementation")}await new Promise(t=>setTimeout(t,60));let r=a.find(e=>e.id===t);if(r)return r}async function i(t,e){{console.log("[API] Creating report with title:",t),console.log("[API] Reference product:",e.id,e.model),console.log("[API] Images to upload:",e.images.length);let r=await s.ReportsApiService.createReport({title:t,reference:e});if(console.log("[API] Create report response status:",r.status),r.error&&console.error("[API] Create report error:",r.error),201===r.status)return console.log("[API] Report created successfully with ID:",r.body.id),r.body.id;throw Error("HTTP ".concat(r.status,": ").concat(r.error||"Failed to create report"))}}async function c(t,e){{let r=await s.ReportsApiService.listReports(t,e);if(200===r.status)return{reports:r.body.reports,nextCursor:r.body.next_cursor,hasMore:r.body.has_more,total:r.body.total};throw Error(r.error||"Failed to list reports")}}let l={createReport:i,listReports:c,getReport:async function(t){return n(t,"getReport")},getFullReport:n}},8198:(t,e,r)=>{r.d(e,{bd:()=>c,getProductWithAnalysis:()=>n,qQ:()=>i});let o=[{id:"p1",brand:"TimberCraft",series:"Artisan Series",model:"Classic Oak Heritage",images:[{id:"img_p1_1",url:"https://picsum.photos/seed/timber1/800/800"},{id:"img_p1_2",url:"https://picsum.photos/seed/timber1alt/800/800"}],category:{type:"Hardwood",material:"Oak",look:"Rustic",texture:"Smooth",finish:"Matte",edge:"Beveled"},formats:[{length:{val:72,unit:"in"},width:{val:5,unit:"in"},thickness:{val:12,unit:"mm"},vendors:[{sku:"TC-AOH-001",store:"FloorMart",name:"TimberCraft Classic Oak Heritage",price:{val:8.99,unit:"usd"},url:"https://example.com/products/tc-aoh-001"},{sku:"AOH-TC-72x5",store:"BuildDepot",name:"Artisan Oak Heritage Plank",price:{val:9.49,unit:"usd"},url:"https://example.com/products/aoh-tc-72x5"}]}]},{id:"p2",brand:"WoodWorks",series:"Heritage Collection",model:"Rustic Oak Plank",images:[{id:"img_p2_1",url:"https://picsum.photos/seed/woodworks1/800/800"}],category:{type:"Engineered",material:"Oak",look:"Rustic",texture:"Wire-brushed",finish:"Oil",edge:"Micro-beveled"},formats:[{length:{val:84,unit:"in"},width:{val:7,unit:"in"},thickness:{val:15,unit:"mm"},vendors:[{sku:"WW-ROP-002",store:"PremiumFloors",name:"WoodWorks Rustic Oak Heritage",price:{val:12.99,unit:"usd"},url:"https://example.com/products/ww-rop-002"}]}]},{id:"p3",brand:"FloorMaster",series:"Executive Line",model:"Golden Oak Select",images:[{id:"img_p3_1",url:"https://picsum.photos/seed/floormaster1/800/800"},{id:"img_p3_2",url:"https://picsum.photos/seed/floormaster2/800/800"}],category:{type:"Luxury Vinyl",material:"Vinyl",look:"Wood-look",texture:"Embossed",finish:"Low Gloss",edge:"Square"},formats:[{length:{val:48,unit:"in"},width:{val:6,unit:"in"},thickness:{val:6,unit:"mm"},vendors:[{sku:"FM-GOS-003",store:"FloorMart",name:"FloorMaster Golden Oak Select LVP",price:{val:4.99,unit:"usd"},url:"https://example.com/products/fm-gos-003"}]}]},{id:"p4",brand:"NaturalCraft",series:"Vintage Collection",model:"Antique Oak Wide Plank",images:[{id:"img_p4_1",url:"https://picsum.photos/seed/naturalcraft1/800/800"}],category:{type:"Reclaimed",material:"Oak",look:"Distressed",texture:"Hand-scraped",finish:"Natural",edge:"Pillowed"},formats:[{length:{val:96,unit:"in"},width:{val:8,unit:"in"},thickness:{val:18,unit:"mm"},vendors:[{sku:"NC-AOWP-004",store:"Heritage Woods",name:"NaturalCraft Antique Oak Wide Plank",price:{val:18.99,unit:"usd"},url:"https://example.com/products/nc-aowp-004"}]}]},{id:"p5",brand:"Premier Flooring",series:"Signature Series",model:"European Oak Classic",images:[{id:"img_p5_1",url:"https://picsum.photos/seed/premier1/800/800"}],category:{type:"Solid",material:"Oak",look:"Traditional",texture:"Smooth",finish:"Satin",edge:"Square"},formats:[{length:{val:72,unit:"in"},width:{val:5,unit:"in"},thickness:{val:19,unit:"mm"},vendors:[{sku:"PF-EOC-005",store:"PremiumFloors",name:"Premier European Oak Classic",price:{val:15.99,unit:"usd"},url:"https://example.com/products/pf-eoc-005"}]}]},{id:"p6",brand:"Luxury Floors",series:"Modern Collection",model:"Contemporary Oak",images:[{id:"img_p6_1",url:"https://picsum.photos/seed/luxury1/800/800"}],category:{type:"Engineered",material:"Oak",look:"Contemporary",texture:"Smooth",finish:"UV-Cured",edge:"Micro-beveled"},formats:[{length:{val:84,unit:"in"},width:{val:9,unit:"in"},thickness:{val:14,unit:"mm"},vendors:[{sku:"LF-CO-006",store:"Designer Floors",name:"Luxury Contemporary Oak Wide Plank",price:{val:22.99,unit:"usd"},url:"https://example.com/products/lf-co-006"}]}]},{id:"p7",brand:"BuildCorp",series:"Professional Grade",model:"Commercial Oak",images:[{id:"img_p7_1",url:"https://picsum.photos/seed/buildcorp1/800/800"}],category:{type:"Laminate",material:"HDF Core",look:"Wood-look",texture:"Synchronized",finish:"AC4",edge:"Click-lock"},formats:[{length:{val:48,unit:"in"},width:{val:7,unit:"in"},thickness:{val:8,unit:"mm"},vendors:[{sku:"BC-CO-007",store:"BuildDepot",name:"BuildCorp Commercial Oak Laminate",price:{val:3.49,unit:"usd"},url:"https://example.com/products/bc-co-007"}]}]},{id:"p8",brand:"ArtisanCraft",series:"Master Collection",model:"Handcrafted Oak Elite",images:[{id:"img_p8_1",url:"https://picsum.photos/seed/artisan1/800/800"},{id:"img_p8_2",url:"https://picsum.photos/seed/artisan2/800/800"}],category:{type:"Solid",material:"Oak",look:"Artisan",texture:"Hand-scraped",finish:"Natural Oil",edge:"Hand-beveled"},formats:[{length:{val:120,unit:"in"},width:{val:10,unit:"in"},thickness:{val:22,unit:"mm"},vendors:[{sku:"AC-HOE-008",store:"Artisan Floors",name:"ArtisanCraft Handcrafted Oak Elite",price:{val:28.99,unit:"usd"},url:"https://example.com/products/ac-hoe-008"}]}]}];function a(t,e){let r=0;for(let e=0;e<t.length;e++)r=(r<<5)-r+t.charCodeAt(e),r&=r;return{vector:[((r=0x41c64e6d*r+12345&0x7fffffff)/0x7fffffff-.5)*2,((r=0x41c64e6d*r+12345&0x7fffffff)/0x7fffffff-.5)*2],similarity:e}}function s(t,e){let r="".concat(t,"_").concat(e),o=0;for(let t=0;t<r.length;t++)o=(o<<5)-o+r.charCodeAt(t),o&=o;let s=.7+Math.abs(o)%30/100;return{color:{primary:a("".concat(r,"_color_primary"),.95*s),secondary:a("".concat(r,"_color_secondary"),.9*s)},pattern:{primary:a("".concat(r,"_pattern_primary"),.98*s),secondary:a("".concat(r,"_pattern_secondary"),.85*s)},similarity:s}}function n(t,e){let r=o.find(e=>e.id===t);if(r)return{...r,analysis:s(t,e)}}function i(t,e){let r=o.find(e=>e.id===t);if(r)return{id:r.id,brand:r.brand||"",series:r.series||"",model:r.model,image:r.images[0].url,analysis:s(t,e)}}function c(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;return o.filter(t=>t.id!==e).map(e=>{let r=s(e.id,t);return{id:e.id,brand:e.brand||"",series:e.series||"",model:e.model,image:e.images[0].url,analysis:r}}).sort((t,e)=>{var r,o;return((null==(r=e.analysis)?void 0:r.similarity)||0)-((null==(o=t.analysis)?void 0:o.similarity)||0)}).slice(0,r)}}}]);